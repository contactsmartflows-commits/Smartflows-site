<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SmartFlows ‚Äî Automatisation IA pour artisans</title>

<!-- Tailwind for quick utilities (kept from ton project) -->
<script src="https://cdn.tailwindcss.com"></script>
<link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">

<style>
  :root{
    --bg:#0a0a0a;
    --accent:#2dd4bf;
    --accent-2:#38bdf8;
    --muted:#94a3b8;
    --glass: rgba(255,255,255,0.03);
  }

  html,body{height:100%;margin:0;font-family:'Outfit',sans-serif;background:var(--bg);color:#e6eef3;}
  a{color:inherit}
  .container{max-width:1100px;margin:0 auto;padding:48px 20px}

  /* Sticky header / bandeau */
  .topbar{position:sticky;top:0;z-index:60;background:linear-gradient(180deg, rgba(6,8,12,0.65), rgba(6,8,12,0.25));backdrop-filter:blur(6px);display:flex;align-items:center;justify-content:space-between;padding:10px 20px;border-bottom:1px solid rgba(255,255,255,0.03)}
  .brand{font-weight:700;color:var(--accent);letter-spacing:0.4px}
  .top-actions{display:flex;gap:10px;align-items:center}
  .btn{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021018;padding:8px 12px;border-radius:10px;font-weight:700;text-decoration:none;display:inline-flex;align-items:center;gap:8px;box-shadow:0 10px 30px rgba(45,212,191,0.06);transition:transform .18s ease}
  .btn.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)}
  .btn:hover{transform:translateY(-3px)}

  /* Section base */
  section{position:relative;padding:80px 0;overflow:visible}
  h1,h2{margin:0 0 20px}
  p{margin:0 0 18px}

  /* subtle futuristic repeated pattern background (SVG data URI) */
  .futuristic-bg{
    background-color:transparent;
    background-image:
      radial-gradient(rgba(255,255,255,0.02) 1px, transparent 1px),
      linear-gradient(90deg, rgba(255,255,255,0.01) 1px, transparent 1px);
    background-size: 140px 140px, 60px 60px;
  }

  /* hero */
  .hero{min-height:78vh;display:flex;align-items:center;justify-content:center;text-align:center;padding:12vh 20px; background-color:var(--bg); position:relative;overflow:hidden}
  .hero .lead{font-size: 1.25rem; line-height: 1.6;max-width:820px;margin:18px auto;color:#cfeff0}
  /* allow subtle hero background image */
  .hero-bg{
    position:absolute;inset:0;background-position:center;background-size:cover;opacity:0.06;filter:grayscale(40%);z-index:0;pointer-events:none;
  }

  /* typewriter */
  .typewriter{font-size:1.45rem;color:var(--muted);min-height:3em;z-index:2}
  .typewriter span{border-right:2px solid var(--accent);animation:blink .75s step-end infinite}
  @keyframes blink{50%{border-color:transparent}}

  /* small illustrations (side images) */
  .side-img{max-width:160px;margin:10px auto 0}
  .side-row{display:flex;gap:18px;align-items:center;justify-content:center;flex-wrap:wrap}

  /* steps (comment √ßa marche) */
  .steps{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;margin-top:12px}
  .step{background:var(--glass);padding:20px;border-radius:12px;transition:transform .28s ease,background-color .28s ease,box-shadow .28s}
  .step:hover{transform:translateY(-6px);background:linear-gradient(180deg, rgba(45,212,191,0.06), rgba(56,189,248,0.02));box-shadow:0 10px 30px rgba(8,12,20,0.4)}

  /* pourquoi choisir - roulette (conserv√©) */
  .advantages-line{display:flex;gap:14px;align-items:center;justify-content:center;flex-wrap:wrap;margin-top:60px}
  .adv-item{padding:12px 18px;border-radius:999px;background:transparent;color:rgba(255,255,255,0.55);transition:all .45s ease;font-weight:600}
  .adv-item.dim{color:rgba(255,255,255,0.28);transform:scale(.95)}
  .adv-item.active{background:linear-gradient(90deg,var(--accent),var(--accent-2));color:#021018;box-shadow:0 12px 30px rgba(45,212,191,0.08);transform:scale(1.02)}
  .adv-desc {text-align: center;color: #ddd;font-size: 1.2rem;margin-top: 60px;transition: opacity 0.6s ease;}

  /* results (conserv√©) */
  .results-box{min-height:120px;display:flex;flex-direction:column;align-items:center;justify-content:center;gap:50px}
  .result-item{opacity:0;transform:translateY(8px);transition:transform 1s,opacity 1s;font-size:1.4rem}
  .result-item.show {opacity: 1;transform: translateY(0)}

  /* =====================
     TESTIMONIALS (fix)
     ===================== */
  /* wrapper kept same visual style but ensure centralized stacking context */
  .testimonial-wrapper{
    position:relative;
    height:200px;               /* slightly taller for centered card */
    overflow:hidden;
    border-radius:12px;
    background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
    padding:20px;
    display:flex;
    align-items:center;
    justify-content:center;
  }

  /* Each testimonial is absolutely placed but centered by default.
     We'll position visible one at center and hide the others offscreen */
  .testimonial{
    position:absolute;
    top:50%;
    left:50%;
    transform:translate(-50%,-50%) scale(0.95);
    width:80%;
    max-width:720px;
    opacity:0;
    padding:12px;
    transition: transform 0.8s cubic-bezier(.2,.9,.3,1), opacity 0.6s ease, left 0.8s ease;
    box-sizing:border-box;
    text-align:center;
    pointer-events:none;
  }

  /* visible (center) testimonial */
  .testimonial.visible{
    opacity:1;
    transform:translate(-50%,-50%) scale(1.06);
    z-index:3;
    pointer-events:auto;
  }

  /* left and right offscreen states (smooth transitions) */
  .testimonial.leftOff{
    left:-60%;
    opacity:0;
    transform:translate(-50%,-50%) scale(0.9);
    z-index:1;
  }
  .testimonial.rightOff{
    left:160%;
    opacity:0;
    transform:translate(-50%,-50%) scale(0.9);
    z-index:1;
  }

  .quote{font-size:1.05rem;margin:0 0 10px;color:#e6eef3}
  .author{font-weight:700;margin:0;color:var(--accent)}
  .role{color:var(--muted);font-size:0.95rem;margin-top:6px}

  /* Footer CTA fade */
  .cta-fade{opacity:0;transform:translateY(10px);transition:all .9s ease}
  .cta-fade.show{opacity:1;transform:translateY(0)}

  /* image loaded */
  img{opacity:0;transform:scale(1.02);transition:opacity 0.9s ease,transform 0.9s ease}
  img.loaded{opacity:1;transform:scale(1)}

  /* responsive */
  @media(max-width:900px){
    .steps{grid-template-columns:1fr}
    .hero .small-img{display:none}
    .adv-item{font-size:.95rem;padding:10px 14px}
    .results-box{min-height:110px}
    .testimonial{width:92%}
  }
</style>
</head>

<body>

<!-- Sticky topbar -->
<div class="topbar">
  <div class="brand">SmartFlows</div>
  <div class="top-actions">
    <a href="https://tally.so/r/mOvoWa" class="btn" id="btn-demo">Essayer une d√©mo</a>
    <a href="https://tally.so/r/3jNJW4" class="btn secondary" id="btn-contact">Contacter l'√©quipe</a>
  </div>
</div>

<!-- HERO -->
<section id="hero" class="hero futuristic-bg">
  <!-- subtle hero bg image (very low opacity) -->
  <div class="hero-bg" style="background-image:url('bg-hero.jpg');"></div>

  <div class="container text-center relative z-10">
    <h1 class="text-3xl md:text-5xl font-bold text-cyan-300 leading-tight">Artisans, Faites vos devis sans lever un doigt.</h1>

    <div style="height:32px"></div>
    <div id="typewriter" class="typewriter"></div>

    <p class="lead mt-6">Vous r√™vez d‚Äôenvoyer vos devis et factures sans m√™me les saisir ? De renseigner un client sans d√©crocher ? C‚Äôest d√©sormais possible.</p>

    <div style="height:36px"></div>
    <div class="flex items-center justify-center gap-4">
      <a href="https://tally.so/r/mOvoWa" class="btn" data-particles>Cliquez pour essayer l‚Äôestimation de devis par IA</a>
      <a href="https://tally.so/r/3jNJW4" class="btn secondary" data-particles>Cliquez pour parler √† un expert Smartflows</a>
    </div>
    <p class="mt-9 text-lg text-gray-300 max-w-2xl mx-auto">Un outil simple qui envoie automatiquement vos devis, factures et r√©ponses clients pendant que vous travaillez.</p>
  </div>

</section>

<!-- COMMENT √áA MARCHE -->
<section id="how-it-works" class="py-20 relative overflow-hidden futuristic-bg">
  <div class="container mx-auto px-6 text-center">
    <h2 class="text-3xl md:text-4xl font-bold text-cyan-300 mb-16">
      ‚öôÔ∏è Comment √ßa marche ?
    </h2>

    <div class="flex flex-col lg:flex-row items-center lg:items-start lg:space-x-12">

      <!-- üìã √âtapes (√† gauche sur PC) -->
      <div class="flex-1 flex flex-col justify-between space-y-8 mb-12 lg:mb-0">
        <div class="step transform transition-all duration-300 hover:-translate-y-2 hover:bg-cyan-900/20 active:-translate-y-2 active:bg-cyan-900/20 rounded-xl p-6 border border-cyan-400/20 backdrop-blur-sm">
          <p class="text-left text-gray-100">
            <strong>‚ö° Estimation en 1 minute pour vos clients</strong><br>
            Votre client d√©crit sa demande et re√ßoit une estimation de tarif personnalis√©e.
          </p>
        </div>

        <div class="step transform transition-all duration-300 hover:-translate-y-2 hover:bg-cyan-900/20 active:-translate-y-2 active:bg-cyan-900/20 rounded-xl p-6 border border-cyan-400/20 backdrop-blur-sm">
          <p class="text-left text-gray-100">
            <strong>üßæ Devis et factures g√©n√©r√©s automatiquement</strong><br>
            SmartFlows pr√©pare le devis et la facture avec votre logo. Vous pouvez les valider avant envoi pour garder le contr√¥le total.
          </p>
        </div>

        <div class="step transform transition-all duration-300 hover:-translate-y-2 hover:bg-cyan-900/20 active:-translate-y-2 active:bg-cyan-900/20 rounded-xl p-6 border border-cyan-400/20 backdrop-blur-sm">
          <p class="text-left text-gray-100">
            <strong>üì§ Ne perdez plus aucun client</strong><br>
            Chaque demande de devis ou facture est automatiquement envoy√©e et trac√©e.
          </p>
        </div>
      </div>

      <!-- üé• Vid√©o (√† droite sur PC / dessous sur mobile) -->
      <div class="flex-1 w-full flex justify-center items-center">
        <video 
          class="w-2/3 md:w-1/2 lg:w-2/5 xl:w-1/3 max-w-[220px] md:max-w-[320px] lg:max-w-[380px] rounded-xl shadow-lg"
          autoplay 
          muted 
          loop 
          playsinline 
          poster="Chargement video.jpg">
          <source src="DEMO estimation devis.mp4" type="video/mp4">
          Votre navigateur ne supporte pas la lecture vid√©o.
        </video>
      </div>
    </div>
  </div>
</section>


<!-- POURQUOI CHOISIR -->
<section id="why" class="futuristic-bg">
  <div class="container text-center">
    <h2 class="text-3xl md:text-4xl font-bold text-cyan-300">Pourquoi choisir SmartFlows ?</h2>

    <p id="why-desc" class="mt-8 text-gray-200 max-w-2xl mx-auto">Un service qui vous fait gagner du temps, am√©liore votre professionnalisme et automatise vos envois sans effort.</p>

    <!-- roulette -->
    <div class="advantages-line mt-8" aria-hidden="false">
      <div class="adv-item dim" data-adv="0">‚è±Ô∏è Gain de temps</div>
      <div class="adv-item active" data-adv="1">üíº Professionnalisme</div>
      <div class="adv-item dim" data-adv="2">üé® 100% personnalisable</div>
      <div class="adv-item dim" data-adv="3">üí∂ Abordable</div>
    </div>
    <p id="adv-description" class="adv-desc"></p>
  </div>
</section>

<!-- R√âSULTATS -->
<section id="results" class="futuristic-bg">
  <div class="container text-center">
    <h2 class="text-3xl md:text-4xl font-bold text-cyan-300">Des r√©sultats concrets d√®s la premi√®re semaine</h2>

    <div class="results-box mt-14">
      <div id="result-0" class="result-item">‚è±Ô∏è +4 heures gagn√©es par semaine</div>
      <div id="result-1" class="result-item">üìà +30% de demandes trait√©es automatiquement</div>
      <div id="result-2" class="result-item">üèóÔ∏è +15% de devis transform√©s en chantier</div>
    </div>
  </div>
</section>

<!-- AVIS -->
<section id="testimonials" class="futuristic-bg">
  <div class="container text-center">
    <h2 class="text-3xl md:text-4xl font-bold text-cyan-300">Ils nous font confiance</h2>
    <div class="testimonial-wrapper mt-8">
      <div class="testimonial">
        <p class="quote">¬´ Avant, je passais 2h par jour √† faire des devis. Aujourd‚Äôhui, tout part automatiquement. ¬ª</p>
        <p class="author">Marc</p>
        <p class="role">Plombier ‚Äî Lyon</p>
      </div>
      <div class="testimonial">
        <p class="quote">¬´ En une semaine, j‚Äôai r√©pondu √† 3x plus de clients sans rien faire. ¬ª</p>
        <p class="author">Julie</p>
        <p class="role">√âlectricienne ind√©pendante</p>
      </div>
      <div class="testimonial">
        <p class="quote">¬´ Simple √† configurer et tr√®s fiable. ¬ª</p>
        <p class="author">Olivier</p>
        <p class="role">Paysagiste ‚Äî Bordeaux</p>
      </div>
    </div>
  </div>
</section>

<!-- FAQ -->
<section id="faq" class="futuristic-bg py-24 md:py-32">
  <div class="container text-center">
    <h2 class="text-3xl md:text-4xl font-bold text-cyan-300">Questions fr√©quentes</h2>
    <div class="mt-10 space-y-8 text-left max-w-2xl mx-auto">
      
      <div>
        <p class="font-semibold text-cyan-200">üí° Est-ce que c‚Äôest compliqu√© √† utiliser ?</p>
        <p class="text-gray-300">Pas du tout. SmartFlows fonctionne depuis votre t√©l√©phone ou votre PC. En 5 minutes, tout est pr√™t, m√™me sans √™tre √† l‚Äôaise avec l‚Äôinformatique.</p>
      </div>

      <div>
        <p class="font-semibold text-cyan-200">üßæ Est-ce que je garde le contr√¥le sur mes devis ?</p>
        <p class="text-gray-300">Oui. Chaque devis g√©n√©r√© par l‚ÄôIA vous est pr√©sent√© avant envoi. Vous pouvez le modifier, valider ou le rejeter √† tout moment.</p>
      </div>

      <div>
        <p class="font-semibold text-cyan-200">üí∂ Y a-t-il un abonnement ou un engagement ?</p>
        <p class="text-gray-300">Non. Vous testez gratuitement pendant 1 mois, sans carte bancaire et sans engagement. Vous arr√™tez quand vous voulez.</p>
      </div>

      <div>
        <p class="font-semibold text-cyan-200">üöÄ Combien de temps faut-il pour installer SmartFlows ?</p>
        <p class="text-gray-300">L‚Äôinstallation se fait en quelques minutes. Vous r√©pondez √† quelques questions sur votre activit√© et SmartFlows fait le reste.</p>
      </div>

      <div>
        <p class="font-semibold text-cyan-200">ü§î Et si je ne suis pas s√ªr que √ßa marche pour mon m√©tier ?</p>
        <p class="text-gray-300">Nos utilisateurs viennent de tous les m√©tiers du b√¢timent : plombiers, √©lectriciens, paysagistes, peintres, etc. L‚Äôoutil s‚Äôadapte √† vos devis et vos tarifs.</p>
      </div>

    </div>
  </div>
</section>

<!-- CONTACT -->
<section id="contact" class="futuristic-bg">
  <div class="container text-center">
    <h2 class="text-3xl md:text-4xl font-bold text-cyan-300">Essayez SmartFlows gratuitement pendant 1 mois</h2>
    <p class="mt-6 text-gray-200 max-w-2xl mx-auto">Testez d√®s maintenant comment vos clients recevront leur devis automatique.
Aucune carte bancaire, aucun engagement ‚Äî juste du temps gagn√©.</p>
    <div style="height:32px"></div>
    <a href="https://tally.so/r/3jNJW4" class="btn" data-particles>Cliquez pour discuter avec l‚Äô√©quipe SmartFlows</a>
  </div>
</section>

<footer class="container text-center opacity-60 pb-10 pt-8">
  ¬© <span id="year"></span> SmartFlows ‚Äî Automatisation pour artisans du BTP
</footer>

<!-- JS -->
<script>
/* -------------------------
  Helpers & initial setup
---------------------------*/
document.getElementById('year').textContent = new Date().getFullYear();

/* add .loaded to images as they load */
document.querySelectorAll('img').forEach(img=>{
  img.addEventListener('load',()=>img.classList.add('loaded'));
  if(img.complete) img.classList.add('loaded');
});

/* --- Effet mini-explosion futuriste (conserv√©) --- */
function spawnEnergyBurst(target){
  const rect=target.getBoundingClientRect();
  const container=document.createElement('div');
  container.style.position='fixed';
  container.style.left=rect.left+'px';
  container.style.top=rect.top+'px';
  container.style.width=rect.width+'px';
  container.style.height=rect.height+'px';
  container.style.pointerEvents='none';
  container.style.overflow='visible';
  container.style.zIndex=9999;
  document.body.appendChild(container);

  const colors=['#2dd4bf','#38bdf8','#60a5fa','#a78bfa','#14b8a6'];
  for(let i=0;i<18;i++){
    const spark=document.createElement('div');
    const size=Math.random()*4+3;
    spark.style.position='absolute';
    spark.style.left=(rect.width/2)+'px';
    spark.style.top=(rect.height/2)+'px';
    spark.style.width=size+'px';
    spark.style.height=size+'px';
    spark.style.borderRadius='50%';
    spark.style.background=colors[Math.floor(Math.random()*colors.length)];
    spark.style.filter='drop-shadow(0 0 4px #38bdf8)';
    container.appendChild(spark);
    const dx=(Math.random()-0.5)*120;
    const dy=(Math.random()-0.5)*120;
    spark.animate([
      {transform:'translate(0,0) scale(1)',opacity:1},
      {transform:`translate(${dx}px,${dy}px) scale(0)`,opacity:0}
    ],{duration:600+Math.random()*300,easing:'cubic-bezier(.2,.9,.3,1)'});
  }
  const pulse=document.createElement('div');
  pulse.style.position='absolute';
  pulse.style.left='50%';
  pulse.style.top='50%';
  pulse.style.width='20px';
  pulse.style.height='20px';
  pulse.style.margin='-10px';
  pulse.style.borderRadius='50%';
  pulse.style.border='2px solid #38bdf8';
  pulse.style.opacity='0.6';
  pulse.style.animation='energyPulse 0.6s ease-out forwards';
  container.appendChild(pulse);
  setTimeout(()=>container.remove(),200);
}
document.querySelectorAll('[data-particles]').forEach(btn=>{
  btn.addEventListener('mouseenter',()=>spawnEnergyBurst(btn));
  btn.addEventListener('click',()=>spawnEnergyBurst(btn));
});

/* -------------------------
  Typewriter (conserv√©)
---------------------------*/
const phrases = [
  "Pas le temps d'envoyer vos factures ?",
  "Marre d'envoyer vos devis √† 22h ?",
  "Pas le temps de d√©crocher le t√©l√©phone ?"
];
const typeEl = document.getElementById('typewriter');
let pi=0, pj=0, cur=[], deleting=false;
function typeLoop(){
  const word = phrases[pi];
  if(!deleting){
    if(pj < word.length){
      cur.push(word[pj]); pj++;
      typeEl.textContent = cur.join('');
      setTimeout(typeLoop, 35);
    } else {
      setTimeout(()=>{deleting=true; typeLoop();}, 850);
    }
  } else {
    if(pj > 0){
      cur.pop(); pj--;
      typeEl.textContent = cur.join('');
      setTimeout(typeLoop, 22);
    } else {
      deleting=false; pi=(pi+1)%phrases.length; setTimeout(typeLoop, 240);
    }
  }
}
typeLoop();

/* -------------------------
  TESTIMONIALS - NEW: only one centered visible
  - Logic: compute index tIndex (center). For each testimonial:
    * if i === tIndex -> set .visible (center)
    * if i === tIndex - 1 (previous) -> set leftOff (off-left)
    * if i === tIndex + 1 (next) -> set rightOff (off-right)
    * all other -> place rightOff (off-right) for simplicity
  - Rotation every 4s
---------------------------*/
const testimonials = Array.from(document.querySelectorAll('.testimonial'));
let tIndex = 0;

function renderTestimonials() {
  const len = testimonials.length;
  testimonials.forEach((el,i)=>{
    // reset classes
    el.classList.remove('visible','leftOff','rightOff');

    if(i === tIndex) {
      // center visible
      el.classList.add('visible');
    } else if (i === (tIndex - 1 + len) % len) {
      // previous (send left off)
      el.classList.add('leftOff');
    } else if (i === (tIndex + 1) % len) {
      // next (send right off)
      el.classList.add('rightOff');
    } else {
      // all others go to rightOff (keeps them offscreen)
      el.classList.add('rightOff');
    }
  });
}

// initial render
if(testimonials.length){
  renderTestimonials();
  // rotate slowly and smoothly
  setInterval(()=>{
    tIndex = (tIndex + 1) % testimonials.length;
    renderTestimonials();
  }, 4000);
}

/* -------------------------
  Advantages roulette + description (conserved behavior)
---------------------------*/
const advEls = Array.from(document.querySelectorAll('.adv-item'));
const advDesc = document.getElementById('adv-description');
let advIndex = 0;
const advTexts = [
  "Plus besoin de passer vos soir√©es sur vos devis. SmartFlows automatise vos r√©ponses pendant que vous travaillez.",
  "Offrez une image moderne et r√©active : vos clients re√ßoivent un devis clair et personnalis√© dans la minute.",
  "Mod√®les de devis et factures √† vos couleurs, avec vos tarifs et votre logo. Vous gardez le contr√¥le.",
  "Profitez d'un mois gratuit avec une solution performante et abordable, sans compromis sur la qualit√©."
];
function rotateAdvantages() {
  advEls.forEach((el, i) => {
    el.classList.remove('active', 'dim');
    if (i === advIndex) el.classList.add('active');
    else el.classList.add('dim');
  });
  advDesc.textContent = advTexts[advIndex];
  advIndex = (advIndex + 1) % advEls.length;
}
rotateAdvantages();
setInterval(rotateAdvantages, 3000);

/* -------------------------
  Results (conserved)
---------------------------*/
const resultEls = Array.from(document.querySelectorAll('.result-item'));
let rIndex = 0;
function updateResults() {
  resultEls.forEach((el, i) => {
    el.style.transition = 'transform 1s ease, opacity 1s ease';
    if (i === rIndex) {
      el.style.transform = 'scale(1.1) translateY(-10px)';
      el.style.opacity = '1';
      el.style.zIndex = '2';
    } else {
      el.style.transform = 'scale(0.9)';
      el.style.opacity = '0.6';
      el.style.zIndex = '1';
    }
  });
}
function nextResult() {
  rIndex = (rIndex + 1) % resultEls.length;
  updateResults();
}
if (resultEls.length) {
  updateResults();
  setInterval(nextResult, 3000);
}

/* ------------------------- 
  Scroll-linked blur & clarity effect (conserved, with exception for mobile #how-it-works)
---------------------------*/
const sections = Array.from(document.querySelectorAll('section'));

function updateSectionClarity(){
  const vh = window.innerHeight;
  const center = window.scrollY + vh/2;
  const isMobile = window.innerWidth < 768; // d√©tecte le mobile

  sections.forEach(sec=>{
    // Si c'est la section "Comment √ßa marche" ET mobile, on ne fait pas de flou
    if(isMobile && sec.id === "how-it-works"){
      sec.style.opacity = 1;
      sec.style.filter = 'none';
      sec.classList.add('in-clear');
      return; // on saute le reste du calcul
    }

    const rect = sec.getBoundingClientRect();
    const topAbs = window.scrollY + rect.top;
    const secCenter = topAbs + rect.height/2;
    const dist = Math.min(Math.abs(secCenter - center), vh*1.2);
    const n = dist / (vh*1.2);
    const clarity = 1 - Math.pow(n, 1.2);
    const opacity = 0.55 + 0.45 * clarity;
    const blur = Math.max(0, 6 * (1 - clarity));
    sec.style.opacity = opacity;
    sec.style.filter = `blur(${blur}px)`;
    if(clarity > 0.75) sec.classList.add('in-clear'); else sec.classList.remove('in-clear');
  });
}

window.addEventListener('load', ()=>{ updateSectionClarity(); });
window.addEventListener('scroll', ()=>{ window.requestAnimationFrame(updateSectionClarity); });
window.addEventListener('resize', ()=>{ window.requestAnimationFrame(updateSectionClarity); });

/* -------------------------
  Simple appear-on-scroll for elements (conserved)
---------------------------*/
const io = new IntersectionObserver((entries)=>{
  entries.forEach(ent=>{
    if(ent.isIntersecting){
      ent.target.classList.add('show');
    } else {
      ent.target.classList.remove('show');
    }
  });
}, {threshold: 0.14});

document.querySelectorAll('section, .step, .result-item, .testimonial, .adv-item').forEach(el=>{
  io.observe(el);
});


/* -------------------------
  Accessibility: keyboard focus for top actions (conserved)
---------------------------*/
document.querySelectorAll('.top-actions a').forEach(a=>{
  a.addEventListener('focus', ()=> a.classList.add('focus'));
  a.addEventListener('blur', ()=> a.classList.remove('focus'));
});
</script>
</body>
</html>
